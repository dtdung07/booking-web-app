<main class="home-main">
    <section class="banner-brand">
        <div class="banner-brand-section">
            <img src="<?php echo asset('images/home-layer-1_v2.webp'); ?>" alt="" class="floating-layer layer-1">
            <img src="<?php echo asset('images/home-layer-2_v2.webp'); ?>" alt="" class="floating-layer layer-2">
            <img src="<?php echo asset('images/home-layer-3_v2.webp'); ?>" alt="">
            <img src="<?php echo asset('images/home-layer-4_v2.webp'); ?>" alt="">
            <img src="https://quannhautudo.com/Static/web_images/Gach-1.png" alt="" class="gach_1">
            <img src="https://quannhautudo.com/Static/web_images/Gach-2.png" alt="" class="gach_2">
           <div class="tv-frame">
               <video src="<?php echo asset('videos/web-tv.mp4'); ?>" controls ></video>
             <img src="https://quannhautudo.com/Static/web_images/TV.png" alt="" class="frame" >
           </div>
        </div>
    </section>
    <section class="new-dishes-section">
        <div class="container">
            <h2 class="section-title">Món mới ra lò</h2>
            <div class="carousel-wrapper">
                <div class="dishes-carousel" id="dishesCarousel">
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2025/06/202506271714066553.webp" alt="Gỏi bò cà pháo đồng quê">
                        <div class="dish-info">
                            <h3>Gỏi bò cà pháo đồng quê</h3>
                            <div class="dish-meta">
                                <span class="price">169.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2025/06/202506271649402242.webp" alt="Trâu tươi cháy tỏi">
                        <div class="dish-info">
                            <h3>Trâu tươi cháy tỏi</h3>
                            <div class="dish-meta">
                                <span class="price">189.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2025/06/202506271717089.webp" alt="Ốc hương ủ muối thảo mộc">
                        <div class="dish-info">
                            <h3>Ốc hương ủ muối thảo mộc</h3>
                            <div class="dish-meta">
                                <span class="price">159.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2024/05/202405301017077267.webp" alt="Tôm càng nướng">
                        <div class="dish-info">
                            <h3>Tôm càng nướng</h3>
                            <div class="dish-meta">
                                <span class="price">199.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2025/06/202506271714066553.webp" alt="Cá lóc nướng lá chuối">
                        <div class="dish-info">
                            <h3>Cá lóc nướng lá chuối</h3>
                            <div class="dish-meta">
                                <span class="price">249.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2025/06/202506271649402242.webp" alt="Gà nướng mật ong">
                        <div class="dish-info">
                            <h3>Gà nướng mật ong</h3>
                            <div class="dish-meta">
                                <span class="price">179.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2025/06/202506271717089.webp" alt="Bò nướng lá lốt">
                        <div class="dish-info">
                            <h3>Bò nướng lá lốt</h3>
                            <div class="dish-meta">
                                <span class="price">219.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2024/05/202405301017077267.webp" alt="Chả cá Lã Vọng">
                        <div class="dish-info">
                            <h3>Chả cá Lã Vọng</h3>
                            <div class="dish-meta">
                                <span class="price">169.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2024/05/202405301017077267.webp" alt="Chả cá Lã Vọng">
                        <div class="dish-info">
                            <h3>Chả cá Lã Vọng</h3>
                            <div class="dish-meta">
                                <span class="price">169.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="dish-card">
                        <img src="https://storage.quannhautudo.com/data/thumb_400/Data/images/product/2024/05/202405301017077267.webp" alt="Chả cá Lã Vọng">
                        <div class="dish-info">
                            <h3>Chả cá Lã Vọng</h3>
                            <div class="dish-meta">
                                <span class="price">169.000</span>
                                <button class="btn-add-dish">
                                    <i class="fas fa-plus"></i> Đặt
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Nút điều hướng trái/phải -->
            <div class="carousel-nav">
                <button class="prev-btn" onclick="prevSlide()">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="next-btn" onclick="nextSlide()">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <!-- Indicator chấm tròn -->
            <div class="carousel-dots">
                <span class="dot active" onclick="goToSlide(1)"></span>
                <span class="dot" onclick="goToSlide(2)"></span>
                <span class="dot" onclick="goToSlide(3)"></span>
            </div>
            
            <!-- Button xem thực đơn -->
            <div class="section-cta">
                <a href="?page=menu" class="btn-booking">XEM THỰC ĐƠN</a>
            </div>
        </div>
    </section>

    <section class="cs-section">
        <div class="container">
            <div class="cs-grid">
                
                <aside class="cs-sidebar">
                    <h2><?php echo $total_branches; ?> CƠ SỞ</h2>
                    <p>Quán Nhậu Tự Do tự hào khi có số lượng cơ sở khắp các quận cùng đội ngũ nhân viên nhiệt tình chu đáo sẵn sàng phục vụ quý thực khách.</p>
                    <ul class="cs-locations-list">
                        <?php if(isset($location_counts) && !empty($location_counts)): ?>
                            <?php foreach($location_counts as $district => $count): ?>
                            <li><a href="#cs-group-<?php echo strtolower(str_replace(' ', '-', $district)); ?>" data-district="<?php echo htmlspecialchars($district); ?>"><span><?php echo htmlspecialchars($district); ?></span> <span><?php echo $count; ?></span></a></li>
                            <?php endforeach; ?>
                        <?php else: ?>
                           
                        <?php endif; ?>
                    </ul>
                </aside>

                <div class="cs-main-content">
                    <?php if(isset($grouped_branches) && !empty($grouped_branches)): ?>
                        <?php foreach($grouped_branches as $district => $branches): ?>
                        <div class="cs-group" id="cs-group-<?php echo strtolower(str_replace(' ', '-', $district)); ?>">
                            <h3 class="cs-group-title"><?php echo strtoupper(htmlspecialchars($district)); ?></h3>
                            <?php foreach($branches as $branch): ?>
                            <div class="cs-card">
                                <div class="cs-card-image">
                                    <img src="<?php echo $branch['image']; ?>" alt="<?php echo htmlspecialchars($branch['name']); ?>">
                                    
                                </div>
                                <div class="cs-card-details">
                                    <h4><i class="fa-solid fa-location-dot"></i> <?php echo htmlspecialchars($branch['name']); ?></h4>
                                    <!-- <p><?php echo htmlspecialchars($branch['description']); ?></p> -->
                                    <div class="cs-card-actions">
                                        <a href="?page=booking&branch_id=<?php echo $branch['id']; ?>" class="btn-action">Đặt bàn ngay</a>
                                        <a href="https://www.google.com/maps/search/<?php echo urlencode($branch['name'] . ' ' . $branch['address']); ?>" target="_blank" class="btn-action">Xem bản đồ</a>
                                        <a href="?page=branches&action=detail&id=<?php echo $branch['id']; ?>" class="btn-action">Xem chi tiết</a>
                                    </div>
                                </div>
                            </div>
                            <?php endforeach; ?>
                        </div>
                        <?php endforeach; ?>
                    <?php else: ?>
                        <!-- Fallback content nếu không có dữ liệu -->
                        <div class="cs-group" id="cs-group-ba-dinh">
                            <h3 class="cs-group-title">BA ĐÌNH</h3>
                            <div class="cs-card">
                                <div class="cs-card-image">
                                    <img src="https://storage.quannhautudo.com/data/thumb_1200/Data/images/product/2023/06/202306281114157262.webp" alt="67A Phó Đức Chính">
                                    <span class="cs-status-tag">Đang mở</span>
                                </div>
                                <div class="cs-card-details">
                                    <h4><i class="fa-solid fa-location-dot"></i> 67A Phó Đức Chính</h4>
                                    <p>Quán Nhậu Tự Do 67A Phó Đức Chính - "Chốn ăn chơi" mới của anh em...</p>
                                    <div class="cs-card-actions">
                                        <a href="#" class="btn-action">Đặt bàn ngay</a>
                                        <a href="#" class="btn-action">Xem bản đồ</a>
                                        <a href="#" class="btn-action">Xem thực đơn</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <?php endif; ?>
                </div>
            </div>
        </div>
    </section>

    <div class="sticky-container">
    <section class="sticky-section section-1">
        <div class="container">
            <div class="hero-content">
                <h1>Dịch vụ tiệc tùng hết nấc</h1>
                <ul>
                    <li><i class="fa-solid fa-check-circle"></i> Loa, mic, video, hồ bồ có</li>
                    <li><i class="fa-solid fa-check-circle"></i> Phòng Vip riêng tư luôn sẵn sàng</li>
                    <li><i class="fa-solid fa-check-circle"></i> Hỗ trợ nhiệt tình mọi yêu cầu</li>
                </ul>
            </div>
            <div class="hero-media media-1">
                <video autoplay muted loop playsinline>
                    <source src="public/videos/Loa-Tu-Do-vp9-chrome.webm" type="video/webm">
                    <source src="public/videos/Loa-Tu-Do-hevc-safari.mp4" type="video/mp4">
                    <p>Trình duyệt không hỗ trợ video HTML5.</p>
                </video>
            </div>
        </div>
    </section>

    <section class="sticky-section section-2">
       <div class="container">
            <div class="hero-content">
                <h1>Chuỗi quán nhậu số 1 Hà Nội</h1>
                <ul>
                    <li><i class="fa-solid fa-check-circle"></i> Ẩm thực vùng miền miễn quá đa dạng</li>
                    <li><i class="fa-solid fa-check-circle"></i> Bia ngon, rượu say với bạn hiền</li>
                    <li><i class="fa-solid fa-check-circle"></i> Cảnh đẹp, quán vui quên lối về</li>
                </ul>
            </div>
            <div class="hero-media media-2">
                <video autoplay muted loop playsinline>
                    <source src="public/videos/Ghe-Tu-Do-vp9-chrome.webm" type="video/webm">
                    <source src="public/videos/Ghe-Tu-Do-hevc-safari.mp4" type="video/mp4">
                    <p>Trình duyệt không hỗ trợ video HTML5.</p>
                </video>
            </div>
        </div>
    </section>
    </div>

    <section class="simple-image-section">
    <div class="container">
        <div class="scrolling-wrapper">
            <div class="scrolling-content">
                <!-- Bộ ảnh đầu tiên -->
                <a href="#">
                    <img src="https://storage.quannhautudo.com/data/thumb_1200/Data/images/product/2025/01/202501071918407117.webp" alt="Ưu đãi lẩu bò và tiệc công ty">
                </a>
                <a href="#">
                    <img src="https://storage.quannhautudo.com/data/thumb_1200/Data/images/product/2024/11/202411181507200201.webp" alt="Ưu đãi lẩu bò và tiệc công ty">
                </a>
                <a href="#">
                    <img src="https://storage.quannhautudo.com/data/thumb_1200/Data/images/product/2025/04/202504191040000408.webp" alt="Ưu đãi lẩu bò và tiệc công ty">
                </a>
                <!-- Bộ ảnh thứ hai (duplicate) để tạo loop liền mạch -->
                <a href="#">
                    <img src="https://storage.quannhautudo.com/data/thumb_1200/Data/images/product/2025/01/202501071918407117.webp" alt="Ưu đãi lẩu bò và tiệc công ty">
                </a>
                <a href="#">
                    <img src="https://storage.quannhautudo.com/data/thumb_1200/Data/images/product/2024/11/202411181507200201.webp" alt="Ưu đãi lẩu bò và tiệc công ty">
                </a>
                <a href="#">
                    <img src="https://storage.quannhautudo.com/data/thumb_1200/Data/images/product/2025/04/202504191040000408.webp" alt="Ưu đãi lẩu bò và tiệc công ty">
                </a>
            </div>
        </div>
    </div>
</section>
</main>



 
 <script>
let currentSlideIndex = 0;
const itemsPerSlide = 4;
const totalSlides = 3; // 10 items / 4 = 2.5 rounds up to 3

function nextSlide() {
    currentSlideIndex = (currentSlideIndex + 1) % totalSlides;
    updateCarousel();
}

function prevSlide() {
    currentSlideIndex = currentSlideIndex === 0 ? totalSlides - 1 : currentSlideIndex - 1;
    updateCarousel();
}

function goToSlide(n) {
    currentSlideIndex = n - 1;
    updateCarousel();
}

function updateCarousel() {
    const carousel = document.querySelector('.dishes-carousel');
    if (!carousel) {
        console.log('Carousel not found!');
        return;
    }
    
    // Tính toán offset dựa trên item width
    const firstCard = carousel.querySelector('.dish-card');
    if (!firstCard) {
        console.log('No cards found!');
        return;
    }
    
    const cardWidth = firstCard.offsetWidth;
    const gap = 20;
    const moveDistance = (cardWidth + gap) * itemsPerSlide;
    const translateX = currentSlideIndex * moveDistance;
    
    carousel.style.transform = `translateX(-${translateX}px)`;
    
    // Cập nhật indicator
    const dots = document.querySelectorAll('.dot');
    dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlideIndex);
    });
    
    console.log(`Slide: ${currentSlideIndex}, translateX: -${translateX}px, cardWidth: ${cardWidth}`);
}

// Function để xử lý cuộn đến section cơ sở
function initializeLocationNavigation() {
    const locationLinks = document.querySelectorAll('.cs-locations-list a[data-district]');
    
    locationLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href').substring(1); // Bỏ dấu #
            const targetElement = document.getElementById(targetId);
            
            if (targetElement) {
                // Cuộn mượt mà đến element
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
                
                // Thêm highlight effect tạm thời
                targetElement.classList.add('highlight');
                setTimeout(() => {
                    targetElement.classList.remove('highlight');
                }, 2000);
            }
        });
    });
}

// Function để xử lý video
function initializeVideos() {
    const videos = document.querySelectorAll('video');
    
    videos.forEach((video, index) => {
        console.log(`Initializing video ${index}`);
        
        // Set các thuộc tính quan trọng
        video.muted = true;
        video.autoplay = true;
        video.loop = true;
        video.playsInline = true;
        
        // Event listeners
        video.addEventListener('loadstart', () => console.log(`Video ${index} started loading`));
        video.addEventListener('loadeddata', () => console.log(`Video ${index} data loaded`));
        video.addEventListener('canplay', () => {
            console.log(`Video ${index} can play`);
            // Thử phát video
            video.play().catch(e => {
                console.log(`Video ${index} autoplay failed:`, e);
                // Nếu autoplay fail, thêm một click listener
                video.addEventListener('click', () => {
                    video.play();
                });
            });
        });
        video.addEventListener('error', (e) => {
            console.log(`Video ${index} error:`, e);
            console.log(`Video ${index} error details:`, video.error);
        });
        video.addEventListener('play', () => console.log(`Video ${index} started playing`));
        video.addEventListener('pause', () => console.log(`Video ${index} paused`));
        
        // Force load video
        video.load();
    });
}

// Khởi tạo khi DOM loaded
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(updateCarousel, 100); // Delay để đảm bảo layout đã render
    console.log('Carousel initialized');
    
    // Initialize videos
    setTimeout(initializeVideos, 200); // Delay thêm một chút để đảm bảo video elements đã ready
    
    // Initialize location navigation
    initializeLocationNavigation();
    console.log('Location navigation initialized');
});

// Bỏ auto slide - chỉ điều khiển thủ công
</script>